<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <meta name="description" content="FreeSurfer Primer : Made for CFMI Training">

    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=cfbf47959cb9cb6dfd62256f8d563c09ed1afd7f">

    <title>FreeSurfer Primer</title>
  </head>

  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="http://github.com/cfmilab/FreeSurfer-Primer">View on GitHub</a>
          <h1 id="project_title">FreeSurfer Primer</h1>
          <h2 id="project_tagline">Made for CFMI Training</h2>
        </header>
    </div>
      <h3 class="masthead-title">
        
          &nbsp;&nbsp;&nbsp;
          <small><a href="/index">Home</a></small>
        
          &nbsp;&nbsp;&nbsp;
          <small><a href="/freesurfer_installation">Install</a></small>
        
          &nbsp;&nbsp;&nbsp;
          <small><a href="introduction">Background</a></small>
        
          &nbsp;&nbsp;&nbsp;
          <small><a href="/training_walkthrough">Training</a></small>
        
          &nbsp;&nbsp;&nbsp;
          <small><a href="/recon-all-udh">Recon-all Quick Reference</a></small>
        
          &nbsp;&nbsp;&nbsp;
          <small><a href="/clcs">Command Line Cheat Sheet</a></small>
        
      </h3>
    <!-- MAIN CONTENT -->    
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1 id="training-walkthrough">Training Walkthrough</h1>

<h4 id="1-create-account-on-httpswwwgithubcom">1. Create Account on <a href="">https://www.github.com</a></h4>

<h4 id="2-fork--clone-freesurfer-primer">2. Fork &amp; Clone FreeSurfer-Primer</h4>
<p>You may <a href="http://stackoverflow.com/questions/2916849/what-do-these-words-mean-in-git-repository-fork-branch-clone-track">fork and then clone</a> a repository containing the training materials by creating an account on <a href="https://github.com">https://github.com</a> going to <a href="https://github.com/cfmilab/FreeSurfer-Primer">https://github.com/cfmilab/FreeSurfer-Primer</a> and clicking the <em>fork</em> button to copy these materials to your own account.</p>

<p>Once the repository is forked to your own account, you can open a terminal and type the following:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nv">mygitun</span><span class="o">=</span><span class="s1">'enteryourgitaccount'</span>
<span class="nb">cd</span> ~
git clone https://github.com/<span class="k">$(</span>mygitun<span class="k">)</span>/FreeSurfer-Primer
</code></pre>
</div>

<h4 id="3-install-freesurfer">3. <a href="/freesurfer_installation">Install FreeSurfer</a></h4>

<h4 id="4-make-dependencies-for-each-subject">4. Make Dependencies for each Subject</h4>
<p>The FreeSurfer-Primer repository contains <em>only</em> the final surfaces and volumes for each subject. All dependencies must be made before recon-all can be run on any subject. For each subject you must execute the following command</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">export </span><span class="nv">SUBJECTS_DIR</span><span class="o">=</span><span class="nv">$HOME</span>/FreeSurfer-Primer
recon-all -s <span class="nv">$subject</span> -make all -qcache
</code></pre>
</div>

<p>This can take at least 7 hours for each subject. This can be considerably sped up if you implement parallelization (see <a href="/freesurfer_installation">Speeding Up Run Times</a>). Let this step run while you perform step 4.</p>

<h4 id="4-rate-mr-image-and-surface-quality">4. Rate MR image and Surface Quality</h4>
<p>The quality of the final surfaces generated by recon-all depend on the characteristics of the raw structural images. All editors must be able to identify basic artifacts and distinguish between low, medium and high quality MR images. Use freeview to load each subject, view their defaced images under <code class="highlighter-rouge">orig/001.mgz</code>.</p>

<p>You will also need to rate the white matter mask and final surfaces. QC ratings are to be <a href="https://docs.google.com/spreadsheets/d/1uMSRjuyrmT930IT7VUAFK9ICuuclBNK8PaQ3rUq5nvY/edit?usp=sharing">entered here.</a></p>

<h4 id="5-perform-editing-on-training-dataset">5. Perform Editing on Training Dataset</h4>

<p>Prior to beginning edits on any subject, copy the <code class="highlighter-rouge">FreeSurfer-Primer</code> directory  and create a new git branch within this new copy to keep track of your changes seperately from the original dataset. Open a terminal, copy the original then move into this new directory and type <code class="highlighter-rouge">git branch</code> to see the current branches in development.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">cd</span> ~
cp -r <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/FreeSurfer-Primer <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/MyFreeSurfer-Primer
<span class="nb">cd </span>MyFreeSurfer-Primer <span class="c"># now move into this directory</span>
git branch <span class="c"># see active branches</span>
</code></pre>
</div>
<p>You can create and checkout a new branch called ‘MyFreeSurferEdits’ by typing:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>git checkout -b MyFreeSurferEdits
git branch <span class="c"># confirm you switched branches</span>
<span class="nb">export </span><span class="nv">SUBJECTS_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/mris 
</code></pre>
</div>
<p>Finally, you need the <a href="https://github.com/seldamat/Surfer-gems">Surfer-Gems</a> repository to quickly view subjects for editing. Clone this repository and use the <code class="highlighter-rouge">launchfv</code> command to open your first subject:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">cd</span> ~
git clone http://github.com/<span class="nv">$mygitun</span>/Surfer-gems.git <span class="c">#assuming its been forked</span>
ls <span class="nv">$SUBJECTS_DIR</span> <span class="c"># check subjects can be found</span>
<span class="nb">cd</span> <span class="nv">$SUBJECTS_DIR</span>
~/Surfer-gems/launchfv -s sub-01 -e <span class="c"># open volumes and surfaces for subject</span>
</code></pre>
</div>

<p>Refer to the procedures in the <a href="/editors-manual.pdf">editor’s manual</a> for each of these steps.</p>

<h4 id="6-evaluate-inter-rater-editor-variance">6. Evaluate Inter-Rater Editor Variance</h4>
        
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">FreeSurfer Primer maintained by <a href="http://github.com/cfmilab">cfmilab</a></p>
        
            <section id="downloads">
              <a class="zip_download_link" href="http://github.com/cfmilab/FreeSurfer-Primer/zipball/gh-pages">Download this project as a .zip file</a>
              <a class="tar_download_link" href="http://github.com/cfmilab/FreeSurfer-Primer/tarball/gh-pages">Download this project as a tar.gz file</a>
            </section>        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
      <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', '', 'auto');
        ga('send', 'pageview');
      </script>
  </body>
</html>
